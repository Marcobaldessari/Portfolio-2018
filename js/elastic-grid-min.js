function createGrid(){w=window.innerWidth,h=window.innerHeight,canvas.width=w,canvas.height=h,lines=[];for(var e=0;e<options.columns-1;e++)lines[e]=new Line((e+1)*(w/options.columns))}function animate(){ctx.clearRect(0,0,w,h),ctx.fillStyle=options.bg_color,ctx.rect(0,0,w,h),ctx.fill();for(var e=0;e<options.columns-1;e++)lines[e].update();window.requestAnimationFrame(animate)}function Line(e){this.color=options.line_default_color,this.posX=e,this.segments=[];for(var o=0;o<options.resolution;o++)this.segments[o]=new spring(e);this.update=function(){for(var e=0;e<this.segments.length;e++)this.segments[e].update();for(var o=new Array(this.segments.length),t=new Array(this.segments.length),s=0;s<8;s++){for(e=0;e<this.segments.length;e++)e>0&&(o[e]=options.k*(this.segments[e].height-this.segments[e-1].height),this.segments[e-1].speed+=o[e]),e<this.segments.length-1&&(t[e]=options.k*(this.segments[e].height-this.segments[e+1].height),this.segments[e+1].speed+=t[e]);for(e=0;e<this.segments[e].length;e++)e>0&&(this.segments[e-1].height+=o[e]),e<segments.length-1&&(this.segments[e+1].height+=t[e])}ctx.strokeStyle=this.color,ctx.lineWidth=options.grid_width,ctx.beginPath(),ctx.moveTo(this.segments[0].height,0);for(var e=0;e<this.segments.length;e++)ctx.lineTo(this.segments[e].height,(e+1)*(h/options.resolution));ctx.stroke()}}function spring(e){this.posX=e,this.height=this.posX,this.speed=0,this.update=function(){var e=this.posX-this.height;this.speed+=options.tension*e-this.speed*options.dampen,this.height+=this.speed}}function cursorMove(e){if(bounds=canvas.getBoundingClientRect(),e.targetTouches&&e.targetTouches[0]?(e.preventDefault(),pointerEvent=e.targetTouches[0],mouse.x=pointerEvent.pageX,mouse.y=pointerEvent.pageY):(mouse.x=e.clientX-bounds.left,mouse.y=e.clientY-bounds.top),mouse.speedx=mouse.x-mouse.previousx,touchStop>300&&(mouse.speedx=10),mouse.segment=Math.floor(options.resolution/h*mouse.y),mouse.column=Math.floor(mouse.x/w*options.columns),mouse.column<mouse.previouscolumn){lines[mouse.column].segments[mouse.segment].speed=mouse.speedx*options.mouse_influence;var o=new TimelineLite;o.to(lines[mouse.column],.001,{color:options.line_active_color}).to(lines[mouse.column],1,{color:options.line_default_color})}if(mouse.column>mouse.previouscolumn){lines[mouse.column-1].segments[mouse.segment].speed=mouse.speedx*options.mouse_influence;var o=new TimelineLite;o.to(lines[mouse.column-1],.001,{color:options.line_active_color}).to(lines[mouse.column-1],1,{color:options.line_default_color})}mouse.previousx=mouse.x,mouse.previousy=mouse.y,mouse.previouscolumn=mouse.column}function getPresetJSON(){return{line_default_color:"#ebebeb",line_active_color:"#787878",bg_color:"#FFFFFF",grid_width:1,resolution:22.589178011373427,tension:.5821971394106497,dampen:.2,k:.021951145958986732,columns:7.994657935550578,click_strength:3e3,mouse_influence:1,preset:"folio",remembered:{Preset1:{0:{line_default_color:"#ebebeb",line_active_color:"#787878",bg_color:"#FFFFFF",columns:7.994657935550578,resolution:22.589178011373427,grid_width:1,tension:.5821971394106497,dampen:.2,k:.021951145958986732,click:"random",mouse_influence:1,click_strength:3e3}},"light, low-res":{0:{line_default_color:"#d9d9d9",line_active_color:"#000000",bg_color:"#FFFFFF",columns:7.994657935550578,resolution:22.589178011373427,grid_width:1,tension:.5821971394106497,dampen:.2,k:.021951145958986732,mouse_influence:1,click_random:!0,click_strength:878.528347406514}},folio:{0:{line_default_color:"#f2f2f2",line_active_color:"#0c51c3",bg_color:"#FFFFFF",columns:16,resolution:22.589178011373427,grid_width:1,tension:.1672945028433569,dampen:.05747957952783044,k:.021951145958986732,mouse_influence:1,click:"random",click_strength:1e3}},"dense grid":{0:{line_default_color:"#050505",line_active_color:"#787878",bg_color:"#FFFFFF",columns:100,resolution:152.72876098569705,grid_width:1,tension:.6258711011545752,dampen:.10552093744614854,k:.0741172669308978,mouse_influence:1.8667068757539202,click_random:!1,click_strength:100}},acid:{0:{line_default_color:"#028e54",line_active_color:"#78ff00",bg_color:"#000000",columns:2,resolution:103.9264173703257,grid_width:1,tension:.6258711011545752,dampen:.10552093744614854,k:.0741172669308978,mouse_influence:3.6423401688781665,click_random:!1,click_strength:5e3}}},closed:!1,folders:{Colors:{preset:"Default",closed:!1,folders:{}},Wave:{preset:"Default",closed:!1,folders:{}}}}}var canvas=document.getElementById("canvas"),w,h,ctx=canvas.getContext("2d"),mouse,touchStop,shower=!1,options,lines,start=Date.now();options={line_default_color:"#f2f2f2",line_active_color:"#0c51c3",bg_color:"#FFFFFF",columns:16,resolution:22.589178011373427,grid_width:1,tension:.1672945028433569,dampen:.05747957952783044,k:.021951145958986732,mouse_influence:1,click:"random",click_strength:1e3},window.setTimeout(function(){createGrid(),animate()},1500),window.addEventListener("resize",createGrid,!1);var mouse=function(){this.x,this.y,this.segment,this.previousx,this.previousy,this.speedx,this.speedy,this.column,this.previouscolumn};window.addEventListener("mousemove",cursorMove),window.addEventListener("touchmove",cursorMove),window.addEventListener("touchend",function(){touchStop=Date.now()-start}),document.addEventListener("click",function(){if("off"!=options.click)for(var e=0;e<lines.length;e++){"random"==options.click?lines[e].segments[Math.floor(Math.random()*options.resolution)].speed=options.click_strength/10:"targeted"==options.click&&(lines[e].segments[mouse.segment].speed=Math.sign(lines[e].posX-mouse.x)*options.click_strength/Math.sqrt(Math.max(Math.abs(lines[e].posX-mouse.x),100)));var o=new TimelineLite;o.to(lines[e],.001,{color:options.line_active_color}).to(lines[e],.8,{color:options.line_default_color})}},!1);